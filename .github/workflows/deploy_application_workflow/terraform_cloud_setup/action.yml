name: Terraform Cloud Setup
on:
  workflow_call:
    inputs:
      aws_region:
        required: true
        type: string
      TF_API_TOKEN:
        required: true
        type: string                         
runs:
  using: "composite"
  steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v3
        with:
          python-version: '3.x' # Version range or exact version of a Python version to use, using SemVer's version range syntax
          architecture: 'x64' # optional x64 or x86. Defaults to x64 if not specified
      - name: Install Python Dependencies
        run: |
          pip install requests 
        shell: bash

      - name: Setup Terraform Cloud
        run: CHOOSEN_AWS_REGION=${{ inputs.aws_region }} TF_API_TOKEN=${{ inputs.TF_API_TOKEN }} python3 scripts/setup_terraform_cloud.py
        shell: bash